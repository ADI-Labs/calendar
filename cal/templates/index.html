<!DOCTYPE html>
<head>
	<title>Columbia University Calendar</title>
	<link rel="stylesheet" href={{ url_for('static', filename='css/bootstrap.min.css') }}>
	<link rel="stylesheet" type="text/css" href={{ url_for('static', filename='css/style.css') }}>
        <script src="http://fb.me/react-0.12.2.js"></script>
        <script src="http://fb.me/JSXTransformer-0.12.2.js"></script>
        <script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
</head>

<body>
    <div id="content"></div>
    <script type="text/jsx">
        var REvent = React.createClass({
            render: function() {
                return (
                    <div className="event">
                        { this.props.data }
                        <br/>
                    </div>
                );
            }
        })

        var RCalendar = React.createClass({
            getInitialState: function() {
                return {eventList: []};
            },
            componentDidMount: function() {
                $.getJSON('{{ url_for("events") }}', function(data) {
                    this.setState({eventList: data.data});
                }.bind(this));
            }, 
            render: function() {
                var events = this.state.eventList.map(function(evt, i) {
                    return <REvent data={ evt }/>;
                });
                console.log(events);
                return (
                    <div className="calendar">
                        { events }
                    </div>
                );
            }
        })

        var calendar = <RCalendar/>
        React.render(calendar, document.getElementById("content"));
    </script>
</body>
